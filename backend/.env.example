# 基础配置
PROJECT_NAME=自媒体自动化
ENV=dev

# ---------------------------
# 鉴权/用户体系（新增）
# ---------------------------
# JWT 密钥（生产环境务必替换为强随机字符串）
SECRET_KEY=dev-secret-change-me
# JWT 算法
JWT_ALGORITHM=HS256
# token 过期时间（分钟）
ACCESS_TOKEN_EXPIRE_MINUTES=120
# 首次启动默认管理员（若 users 表为空会自动创建）
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=admin123
DEFAULT_ADMIN_EMAIL=
# 开发期可选：关闭鉴权（true/false）
DISABLE_AUTH_GUARD=false

# 数据库与缓存
MYSQL_URL=mysql+pymysql://root:password@127.0.0.1:3306/auto_media?charset=utf8mb4&init_command=SET%20time_zone%3D%27%2B08%3A00%27
REDIS_URL=redis://127.0.0.1:6379/0

# 模型供应商（这里也可以不配置，在功能菜单apikey池中配置）
DEFAULT_MODEL_PROVIDER=deepseek
MODEL_API_KEY_DEEPSEEK=your_deepseek_key
MODEL_API_KEY_OPENAI=your_openai_key
MODEL_API_KEY_ALI=your_ali_key
MODEL_API_KEY_BAIDU=your_baidu_key

# 生成默认参数
GENERATION_TONE=专业且亲和
GENERATION_LENGTH=1000
MODEL_DEEPSEEK_VERIFY=false

# ---------------------------
# 每日热点（定时任务）相关配置
# ---------------------------
# 是否启用“每日热点”定时任务（true/false）
# - true：启动后会按 cron 周期自动跑热点聚合/入库等任务
# - false：仅手动触发，不走定时
DAILY_HOTSPOT_BEAT_ENABLED=true
# 每日热点的 cron 表达式（5段制：分 时 日 月 周），默认时区由 CELERY_TIMEZONE 决定
# 例如：5 2 * * * 表示每天 02:05 执行
DAILY_HOTSPOT_CRON=5 2 * * *
# 每次构建/拉取热点的数量上限（越大越耗时/耗模型/耗接口）
DAILY_HOTSPOT_LIMIT=20
# 计算“热点日期”的偏移（相对今天）
# -1 表示取昨天；0 表示取今天；-2 表示前天
DAILY_HOTSPOT_DAY_OFFSET=-1

# ---------------------------
# Celery/Redis 队列配置
# ---------------------------
# Celery Broker（消息队列）地址：用于投递异步任务
# 通常使用 Redis：redis://host:port/db
CELERY_BROKER_URL=redis://127.0.0.1:6379/0
# Celery Result Backend（结果存储）地址：用于存任务执行结果/状态
# 一般也用 Redis，建议与 broker 保持一致或使用不同 db
CELERY_RESULT_BACKEND=redis://127.0.0.1:6379/0
# Celery 时区（影响 cron 触发时间）
CELERY_TIMEZONE=Asia/Shanghai

# 本地开发可选：是否启用 eager（同步）模式
# - true：不需要单独启动 Celery worker，apply_async 会在 Web 进程内立即执行（调试最省事）
# - false：走真实异步，需要单独启动 Celery worker
CELERY_ALWAYS_EAGER=false

# ---------------------------
# 软文生成调试（分层摘要/Prompt 打印）
# ---------------------------
# 软文生成调试开关（true/false）
# - true：控制台打印“分层摘要抽取结果（raw/parsed）”+ “最终 prompt（截断）”
# - false：不打印，保持安静
GENERATION_DEBUG=true
# 调试时打印“最终 prompt”的最大字符数（超出会截断）
# 建议：4000~12000；太大控制台会刷屏
GENERATION_DEBUG_PROMPT_MAX_CHARS=12000
# 调试时打印“压缩抽取模型原始返回 raw_response”的最大字符数（超出会截断）
# 建议：800~4000
GENERATION_DEBUG_COMPRESS_RAW_MAX_CHARS=2000

# ---------------------------
# OSS（对象存储）配置（可选）
# ---------------------------
# 说明：
# - 后端上传接口 /api/utils/upload-image 会优先读取 OSS_* 环境变量；若未配置，会从 APIKey 池 provider=oss 读取。
# - 若两者都未配置，则回退为本地存储（UPLOADS_DIR 或 backend/uploads），并通过 /api/utils/uploads/{key} 访问。
OSS_ENDPOINT=https://oss-cn-hangzhou.aliyuncs.com
OSS_BUCKET=your-bucket
OSS_ACCESS_KEY_ID=your-access-key-id
OSS_ACCESS_KEY_SECRET=your-access-key-secret
OSS_PREFIX=uploads/
OSS_PUBLIC_BASE_URL=https://cdn.example.com
# 可选：本地上传目录（不配置则默认 backend/uploads）
UPLOADS_DIR=
